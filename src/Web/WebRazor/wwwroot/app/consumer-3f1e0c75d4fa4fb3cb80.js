(()=>{"use strict";var e,t={16042:(e,t,r)=>{r(45554);var n=r(68205),a=r(54390),i=(r(77588),r(78933),{class:"navbar navbar-expand-lg fixed-top navbar-dark bg-success","aria-label":"Main navigation"}),s={class:"container-fluid"},o={class:"navbar-brand",href:"/"},l=(0,n._)("button",{class:"navbar-toggler p-0 border-0",type:"button",id:"navbarSideCollapse","aria-label":"Toggle navigation"},[(0,n._)("span",{class:"navbar-toggler-icon"})],-1),u={class:"navbar-collapse offcanvas-collapse mb-2 mb-lg-0",id:"navbarsExampleDefault"},c=(0,n.uE)('<ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item"><a class="nav-link" href="/consumer"><i class="fas fa-dashboard me-2" aria-hidden="true"></i>Dashboard </a></li><li class="nav-item"><a class="nav-link" href="/consumer/billings"><i class="fa-solid fa-money-bill me-2" aria-hidden="true"></i>Billings </a></li><li class="nav-item"><a class="nav-link" href="/consumer/announcements"><i class="fa-solid fa-bullhorn me-2" aria-hidden="true"></i>Announcements </a></li><li class="nav-item"><a class="nav-link" href="/consumer/reservations"><i class="fa-solid fa-calendar me-2" aria-hidden="true"></i>Reservations </a></li><li class="nav-item"><a class="nav-link" href="/consumer/notifications"><i class="fa-solid fa-bell me-2" aria-hidden="true"></i>Notifications </a></li><li class="nav-item"><a class="nav-link" href="/consumer/reader"><i class="fa-solid fa-file-upload me-2" aria-hidden="true"></i>Reader </a></li></ul>',1),d={class:"navbar-nav ms-auto"},m={class:"nav-item dropdown"},f=(0,n._)("a",{class:"nav-link dropdown-toggle",href:"#",id:"dropdown01","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,n._)("i",{class:"fas fa-user me-2","aria-hidden":"true"}),(0,n.Uk)("My Account ")],-1),p={class:"dropdown-menu","aria-labelledby":"dropdown01"};const v={mixins:[r(20136).Z],props:{uid:String,appName:{type:String,required:!0,default:"LMS"},urlProfilePicture:String,menus:Array},components:{},mounted:function(){return(0,a.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:document.querySelector("#navbarSideCollapse").addEventListener("click",(function(){document.querySelector(".offcanvas-collapse").classList.toggle("open")}));case 1:case"end":return e.stop()}}),e)})))()}};var g=r(46021);const b=(0,g.Z)(v,[["render",function(e,t,r,a,v,g){return(0,n.wg)(),(0,n.iD)("nav",i,[(0,n._)("div",s,[(0,n._)("a",o,(0,n.zw)(r.appName),1),l,(0,n._)("div",u,[c,(0,n._)("ul",d,[(0,n._)("li",m,[f,(0,n._)("ul",p,[(0,n._)("li",null,[(0,n._)("a",{class:"dropdown-item",href:"#",onClick:t[0]||(t[0]=(0,n.iM)((function(){return e.logout&&e.logout.apply(e,arguments)}),["prevent"]))},"Logout")])])])])])])])}]]);var h={class:"row"},w=(0,n._)("div",{class:"col"},[(0,n._)("h3",null,"Dashboard")],-1),_={class:"col-auto"},y=[(0,n._)("i",{class:"oi oi-reload"},null,-1),(0,n.Uk)(" Refresh ")],k={class:"row"},x={class:"col-md mb-2 mb-md-0"},R={class:"card card-primary"},D=(0,n._)("div",{class:"card-header"}," Announcements ",-1),S={class:"card-body"},q={class:"col-md mb-2 mb-md-0"},I={class:"card card-primary"},V=(0,n._)("div",{class:"card-header"}," Notifications ",-1),Z={class:"card-body"},z=(0,n._)("br",null,null,-1),U=(0,n._)("h5",null,"Reservations",-1),M={class:"row"},A={class:"col-md mb-2 mb-md-0"},C={class:"card card-primary"},F=(0,n._)("div",{class:"card-header"}," Today ",-1),N={class:"card-body"},B={class:"col-md mb-2 mb-md-0"},E={class:"card card-primary"},$=(0,n._)("div",{class:"card-header"}," Tomorrow ",-1),H={class:"card-body"},T={class:"col-md mb-2 mb-md-0"},P={class:"card card-primary"},Y=(0,n._)("div",{class:"card-header"}," This Week ",-1),O={class:"card-body"},W=(0,n._)("br",null,null,-1),j=(0,n._)("h5",null,"Billing",-1),L={class:"row"},K={class:"col-md mb-2 mb-md-0"},J={class:"card card-primary"},Q=(0,n._)("div",{class:"card-header"}," Over Due ",-1),G={class:"card-body"},X={class:"col-md mb-2 mb-md-0"},ee={class:"card card-primary"},te=(0,n._)("div",{class:"card-header"}," Today ",-1),re={class:"card-body"},ne={class:"col-md mb-2 mb-md-0"},ae={class:"card card-primary"},ie=(0,n._)("div",{class:"card-header"}," Tomorrow ",-1),se={class:"card-body"},oe={class:"col-md mb-2 mb-md-0"},le={class:"card card-primary"},ue=(0,n._)("div",{class:"card-header"}," This Week ",-1),ce={class:"card-body"};var de=r(15500);const me={mixins:[de.Z],props:{uid:String},data:function(){return{message:null,text:null,item:{}}},computed:{},created:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e,t.next=3,r.get();case 3:case"end":return t.stop()}}),t)})))()},methods:{greet:function(){this.message="Hello "+this.text},get:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e,t.prev=1,t.next=4,r.$util.axios.get("/api/dashboard/consumers").then((function(e){return r.item=e.data}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),r.$util.handleError(t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})))()}}},fe=(0,g.Z)(me,[["render",function(e,t,r,a,i,s){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",h,[w,(0,n._)("div",_,[(0,n._)("button",{class:"btn btn-secondary",onClick:t[0]||(t[0]=function(){return s.get&&s.get.apply(s,arguments)})},y)])]),(0,n._)("div",k,[(0,n._)("div",x,[(0,n._)("div",R,[D,(0,n._)("div",S,(0,n.zw)(i.item.announcements),1)])]),(0,n._)("div",q,[(0,n._)("div",I,[V,(0,n._)("div",Z,(0,n.zw)(i.item.notifications),1)])])]),z,U,(0,n._)("div",M,[(0,n._)("div",A,[(0,n._)("div",C,[F,(0,n._)("div",N,(0,n.zw)(i.item.todayReservations),1)])]),(0,n._)("div",B,[(0,n._)("div",E,[$,(0,n._)("div",H,(0,n.zw)(i.item.tomorrowReservations),1)])]),(0,n._)("div",T,[(0,n._)("div",P,[Y,(0,n._)("div",O,(0,n.zw)(i.item.weekReservations),1)])])]),W,j,(0,n._)("div",L,[(0,n._)("div",K,[(0,n._)("div",J,[Q,(0,n._)("div",G,(0,n.zw)(i.item.pastDueDateBillings),1)])]),(0,n._)("div",X,[(0,n._)("div",ee,[te,(0,n._)("div",re,(0,n.zw)(i.item.todayDueDateBillings),1)])]),(0,n._)("div",ne,[(0,n._)("div",ae,[ie,(0,n._)("div",se,(0,n.zw)(i.item.tomorrowDueDateBillings),1)])]),(0,n._)("div",oe,[(0,n._)("div",le,[ue,(0,n._)("div",ce,(0,n.zw)(i.item.weekDueDateBillings),1)])])])])}]]);r(38833),r(56394),r(62322),r(79006),r(11646);var pe={class:"row align-items-center"},ve=(0,n._)("div",{class:"col-sm"},[(0,n._)("h1",{class:"h3 mb-sm-0"},[(0,n._)("i",{class:"fa-solid fa-fw fa-bullhorn me-1"}),(0,n.Uk)("Announcements ")])],-1),ge={class:"col-sm-auto"},be={class:"d-flex flex-row"},he={class:"flex-grow-1 ms-1"},we={class:"input-group"},_e=[(0,n._)("i",{class:"fa-solid fa-magnifying-glass"},null,-1)],ye={class:"mt-2 table-responsive"},ke=(0,n._)("th",{class:"text-center"},"#",-1),xe=(0,n._)("th",null,"Post Date",-1),Re=(0,n._)("th",null,"Subject",-1),De=["textContent"],Se=["href"],qe={class:"row mb-3"},Ie=(0,n._)("label",{for:"subject",class:"col-sm-2 col-form-label"},"Subject",-1),Ve={class:"col-sm-10"},Ze={class:"form-control-plaintext"},ze=["href"],Ue={class:"row mb-3"},Me=(0,n._)("label",{for:"subject",class:"col-sm-2 col-form-label"},"Date",-1),Ae={class:"col-sm-10"},Ce={class:"form-control-plaintext"};r(92129),r(24655),r(46549),r(67441),r(84415);var Fe=r(87124);const Ne={mixins:[Fe.Z],props:{uid:String,urlAdd:{type:String,required:!0},urlView:{type:String,required:!0}},components:{},data:function(){return{baseUrl:"/api/announcement",lookups:{},filter:{items:[],cacheKey:"filter-".concat(this.uid,"/announcements"),query:{}}}},computed:{},created:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(r=e).filter,new URLSearchParams(window.location.search),a=JSON.parse(localStorage.getItem(n.cacheKey))||{},r.initializeFilter(a),t.next=7,r.search();case 7:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},methods:{getQuery:function(){var e=this.filter;if(!this.busy)return["?c=",encodeURIComponent(e.query.criteria),"&p=",e.query.pageIndex,"&s=",e.query.pageSize,"&sf=",e.query.sortField,"&so=",e.query.sortOrder].join("")},saveQuery:function(){var e=this.filter;localStorage.setItem(e.cacheKey,JSON.stringify({criteria:e.query.criteria,pageIndex:e.query.pageIndex,pageSize:e.query.pageSize,sortField:e.query.sortField,sortOrder:e.query.sortOrder,visible:e.visible}))},getTaskTdCss:function(e){switch(e.taskStatus){case 1:return"table-warning";case 2:return"table-info";case 3:return"table-success";default:return""}}}},Be=(0,g.Z)(Ne,[["render",function(e,t,r,a,i,s){var o=(0,n.up)("table-list"),l=(0,n.up)("m-pagination");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",pe,[ve,(0,n._)("div",ge,[(0,n._)("div",be,[(0,n._)("div",he,[(0,n._)("div",we,[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.filter.query.criteria=e}),onKeyup:t[1]||(t[1]=(0,n.D2)((function(t){return e.search(1)}),["enter"]))},null,544),[[n.nr,i.filter.query.criteria]]),(0,n._)("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:t[2]||(t[2]=function(t){return e.search(1)})},_e)])])])])]),(0,n._)("div",ye,[(0,n.Wm)(o,{header:{key:"announcementId",columns:[]},items:i.filter.items,getRowNumber:e.getRowNumber,setSelected:e.setSelected,isSelected:e.isSelected,"table-css":""},{header:(0,n.w5)((function(){return[ke,xe,Re]})),"table-row":(0,n.w5)((function(t){return[(0,n._)("td",{textContent:(0,n.zw)(e.getRowNumber(t.index)),class:"text-center"},null,8,De),(0,n._)("td",null,[(0,n._)("a",{href:"".concat(r.urlView,"/").concat(t.item.announcementId)},(0,n.zw)(t.item.subject),9,Se)]),(0,n._)("td",null,(0,n.zw)(e.$moment(t.item.dateCreated).calendar()),1)]})),"table-list":(0,n.w5)((function(t){return[(0,n._)("div",null,[(0,n._)("div",null,[(0,n._)("div",qe,[Ie,(0,n._)("div",Ve,[(0,n._)("div",Ze,[(0,n._)("a",{href:"".concat(r.urlView,"/").concat(t.item.announcementId)},(0,n.zw)(t.item.subject),9,ze)])])]),(0,n._)("div",Ue,[Me,(0,n._)("div",Ae,[(0,n._)("div",Ce,(0,n.zw)(e.$moment(t.item.dateCreated).calendar()),1)])])])])]})),_:1},8,["items","getRowNumber","setSelected","isSelected"])]),(0,n.Wm)(l,{filter:i.filter,search:e.search,showPerPage:!0,class:"mt-2"},null,8,["filter","search"])])}]]);var Ee=r(22624);const $e={props:{uid:{type:String,required:!0},id:{type:String,required:!0},roleId:{type:String,required:!0},urlEdit:{type:String,required:!0}},components:{announcementsView:Ee.Z},data:function(){return{}},computed:{},created:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},methods:{}},He=(0,g.Z)($e,[["render",function(e,t,r,a,i,s){var o=(0,n.up)("announcements-view");return(0,n.wg)(),(0,n.j4)(o,{uid:r.uid,id:r.id,roleId:r.roleId,urlEdit:r.urlEdit},null,8,["uid","id","roleId","urlEdit"])}]]);r(54458);var Te={class:"row align-items-center"},Pe=(0,n._)("div",{class:"col-sm"},[(0,n._)("h1",{class:"h3 mb-sm-0"},[(0,n._)("i",{class:"fas fa-fw fa-money-bill me-1"}),(0,n.Uk)("Add Billings ")])],-1),Ye={class:"col-sm-auto"},Oe={class:"d-flex flex-row"},We=["disabled"],je=[(0,n._)("span",{class:"fas fa-fw fa-save"},null,-1)],Le=[(0,n._)("i",{class:"fas fa-fw fa-times"},null,-1)],Ke={class:"mt-2"},Je={class:"card shadow-sm"},Qe=(0,n._)("div",{class:"card-header bg-info text-white"},null,-1),Ge={class:"card-body"},Xe={class:"needs-validation",novalidate:""},et={class:"row"},tt={class:"col-sm-6"},rt={class:"form-floating mb-3"},nt=(0,n._)("option",{value:""},"- Select Account -",-1),at=["value"],it=(0,n._)("label",{for:"accountId"},"Account",-1),st={key:0,class:"d-block invalid-feedback"},ot={class:"form-floating mb-3"},lt=(0,n._)("label",{for:"amount"},"Amount",-1),ut={key:0,class:"d-block invalid-feedback"},ct={class:"form-floating mb-3"},dt=(0,n._)("label",{for:"number"},"Billing Number",-1),mt={key:0,class:"d-block invalid-feedback"},ft={class:"form-floating mb-3"},pt=[(0,n.uE)('<option value="">- Select Year -</option><option value="2021">2021</option><option value="2022">2022</option><option value="2023">2023</option><option value="2024">2024</option>',5)],vt=(0,n._)("label",{for:"year"},"Year",-1),gt={key:0,class:"d-block invalid-feedback"},bt={class:"form-floating mb-3"},ht=[(0,n.uE)('<option value="">- Select Month -</option><option value="January">January</option><option value="February">February</option><option value="March">March</option><option value="April">April</option><option value="May">May</option><option value="June">June</option><option value="July">July</option><option value="August">August</option><option value="September">September</option><option value="October">October</option><option value="November">November</option><option value="December">December</option>',13)],wt=(0,n._)("label",{for:"month"},"Month",-1),_t={key:0,class:"d-block invalid-feedback"},yt={class:"form-floating mb-3"},kt=(0,n._)("label",{for:"readingDate"},"Reading Date",-1),xt={key:0,class:"d-block invalid-feedback"},Rt={class:"form-floating mb-3"},Dt=(0,n._)("label",{for:"dateDue"},"Due Date",-1),St={key:0,class:"d-block invalid-feedback"},qt={class:"col-sm-6"},It={class:"form-floating mb-3"},Vt=(0,n._)("label",{for:"dateStart"},"Billing Start",-1),Zt={key:0,class:"d-block invalid-feedback"},zt={class:"form-floating mb-3"},Ut=(0,n._)("label",{for:"dateEnd"},"Billing End",-1),Mt={key:0,class:"d-block invalid-feedback"},At={class:"form-floating mb-3"},Ct=(0,n._)("label",{for:"presentReading"},"Present Reading",-1),Ft={key:0,class:"d-block invalid-feedback"},Nt=(0,n.Uk)(" xxxxxxxx "),Bt={class:"form-floating mb-3"},Et=(0,n._)("label",{for:"previousReading"},"Previous Reading",-1),$t={key:0,class:"d-block invalid-feedback"},Ht={class:"form-floating mb-3"},Tt=(0,n._)("label",{for:"multiplier"},"Multiplier",-1),Pt={key:0,class:"d-block invalid-feedback"},Yt={class:"form-floating mb-3"},Ot=(0,n._)("label",{for:"killoWattHourUsed"},"kWH Used",-1),Wt={key:0,class:"d-block invalid-feedback"},jt={class:"form-floating mb-3"},Lt=(0,n._)("label",{for:"reader"},"Meter Read By",-1),Kt={key:0,class:"d-block invalid-feedback"};r(14327),r(60151);const Jt={mixins:[de.Z],props:{uid:{type:String,required:!0},urlView:{type:String,required:!0}},data:function(){return{isDirty:!1,validations:new Map,lookups:{accounts:[],salutations:[{value:1,text:"Mr"},{value:2,text:"Mrs"},{value:3,text:"Ms"}]},item:{accountId:"",amount:1,number:"",month:"",year:"",readingDate:this.$moment().format("YYYY-MM-DD"),dateStart:this.$moment().format("YYYY-MM-DD"),dateEnd:this.$moment().format("YYYY-MM-DD"),presentReading:null,previousReading:null,multiplier:null,killoWattHourUsed:null,dateDue:null,reader:null}}},computed:{formIsValid:function(){var e=this,t=e.item,r=new Map;return t.accountId||r.set("accountId","Account is required."),t.amount||r.set("amount","Billing Amount is required."),t.amount<0&&r.set("amount","Billing Amount is incorrect."),t.number||r.set("number","Billing Number is required."),t.month||r.set("month","Month is required."),t.year||r.set("year","Year is required."),t.readingDate||r.set("readingDate","Date Reading is required."),t.dateDue||r.set("dateDue","Date Due is required."),t.presentReading||r.set("presentReading","Present reading is invalid."),t.previousReading||r.set("previousReading","Previous reading is invalid."),t.multiplier||r.set("multiplier","Multiplier is invalid."),t.killoWattHourUsed||r.set("killoWattHourUsed","kWH Used is invalid."),t.reader||r.set("reader","Reader is required."),e.isDirty=!0,e.validations=r,0==r.size}},created:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=e).formIsValid,t.next=4,r.getLookups();case 4:case"end":return t.stop()}}),t)})))()},methods:{getValidClass:function(e){return this.isDirty?this.validations.has(e)?"is-invalid":"is-valid":""},getLookups:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e,t.prev=1,t.next=4,r.$util.axios.get("/api/account/lookup").then((function(e){r.lookups.accounts=e.data}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),r.$util.handleError(t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})))()},save:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e).busy){t.next=3;break}return t.abrupt("return");case 3:if(r.formIsValid){t.next=5;break}return t.abrupt("return");case 5:return t.prev=5,r.busy=!0,n=r.$util.clone(r.item),t.next=10,r.$util.axios.post("/api/billing/add-billing/",n).then((function(e){alert("New Billing Created."),setTimeout((function(){var t="".concat(r.urlView,"/").concat(e.data);r.$util.href(t)}),500)}));case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),r.$util.handleError(t.t0);case 15:return t.prev=15,r.busy=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[5,12,15,18]])})))()}}},Qt=(0,g.Z)(Jt,[["render",function(e,t,r,a,i,s){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",Te,[Pe,(0,n._)("div",Ye,[(0,n._)("div",Oe,[(0,n._)("button",{disabled:i.isDirty&&!s.formIsValid,onClick:t[0]||(t[0]=function(){return s.save&&s.save.apply(s,arguments)}),class:"btn btn-primary"},je,8,We),(0,n._)("button",{onClick:t[1]||(t[1]=function(){return e.close&&e.close.apply(e,arguments)}),class:"ms-1 btn btn-secondary"},Le)])])]),(0,n._)("div",Ke,[(0,n._)("div",Je,[Qe,(0,n._)("div",Ge,[(0,n._)("form",Xe,[(0,n._)("div",et,[(0,n._)("div",tt,[(0,n._)("div",rt,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.item.accountId=e}),class:"form-select",id:"accountId"},[nt,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.lookups.accounts,(function(e){return(0,n.wg)(),(0,n.iD)("option",{value:e.accountId},(0,n.zw)(e.name),9,at)})),256))],512),[[n.bM,i.item.accountId]]),it,i.validations.has("accountId")?((0,n.wg)(),(0,n.iD)("div",st,(0,n.zw)(i.validations.get("accountId")),1)):(0,n.kq)("",!0)]),(0,n._)("div",ot,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.item.amount=e}),type:"number",min:"0",max:"99999",class:"form-control",id:"amount",placeholder:"Amount"},null,512),[[n.nr,i.item.amount]]),lt,i.validations.has("amount")?((0,n.wg)(),(0,n.iD)("div",ut,(0,n.zw)(i.validations.get("amount")),1)):(0,n.kq)("",!0)]),(0,n._)("div",ct,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return i.item.number=e}),type:"text",class:"form-control",id:"number",placeholder:"Billing Number"},null,512),[[n.nr,i.item.number]]),dt,i.validations.has("number")?((0,n.wg)(),(0,n.iD)("div",mt,(0,n.zw)(i.validations.get("number")),1)):(0,n.kq)("",!0)]),(0,n._)("div",ft,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[5]||(t[5]=function(e){return i.item.year=e}),class:"form-select",id:"year"},pt,512),[[n.bM,i.item.year]]),vt,i.validations.has("year")?((0,n.wg)(),(0,n.iD)("div",gt,(0,n.zw)(i.validations.get("year")),1)):(0,n.kq)("",!0)]),(0,n._)("div",bt,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[6]||(t[6]=function(e){return i.item.month=e}),class:"form-select",id:"month"},ht,512),[[n.bM,i.item.month]]),wt,i.validations.has("month")?((0,n.wg)(),(0,n.iD)("div",_t,(0,n.zw)(i.validations.get("month")),1)):(0,n.kq)("",!0)]),(0,n._)("div",yt,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[7]||(t[7]=function(e){return i.item.readingDate=e}),type:"date",class:"form-control",id:"readingDate",placeholder:"Reading Date"},null,512),[[n.nr,i.item.readingDate]]),kt,i.validations.has("readingDate")?((0,n.wg)(),(0,n.iD)("div",xt,(0,n.zw)(i.validations.get("readingDate")),1)):(0,n.kq)("",!0)]),(0,n._)("div",Rt,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[8]||(t[8]=function(e){return i.item.dateDue=e}),type:"date",class:"form-control",id:"dateDue",placeholder:"Due Date"},null,512),[[n.nr,i.item.dateDue]]),Dt,i.validations.has("dateDue")?((0,n.wg)(),(0,n.iD)("div",St,(0,n.zw)(i.validations.get("dateDue")),1)):(0,n.kq)("",!0)])]),(0,n._)("div",qt,[(0,n._)("div",It,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[9]||(t[9]=function(e){return i.item.dateStart=e}),type:"date",class:"form-control",id:"dateStart",placeholder:"Billing Start"},null,512),[[n.nr,i.item.dateStart]]),Vt,i.validations.has("dateStart")?((0,n.wg)(),(0,n.iD)("div",Zt,(0,n.zw)(i.validations.get("dateStart")),1)):(0,n.kq)("",!0)]),(0,n._)("div",zt,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[10]||(t[10]=function(e){return i.item.dateEnd=e}),type:"date",class:"form-control",id:"dateEnd",placeholder:"Billing End"},null,512),[[n.nr,i.item.dateEnd]]),Ut,i.validations.has("dateEnd")?((0,n.wg)(),(0,n.iD)("div",Mt,(0,n.zw)(i.validations.get("dateEnd")),1)):(0,n.kq)("",!0)]),(0,n._)("div",At,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[11]||(t[11]=function(e){return i.item.presentReading=e}),type:"number",min:"0",max:"99999",class:"form-control",id:"presentReading",placeholder:"Present Reading"},null,512),[[n.nr,i.item.presentReading]]),Ct,i.validations.has("presentReading")?((0,n.wg)(),(0,n.iD)("div",Ft,(0,n.zw)(i.validations.get("presentReading")),1)):(0,n.kq)("",!0),Nt]),(0,n._)("div",Bt,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[12]||(t[12]=function(e){return i.item.previousReading=e}),type:"number",min:"0",max:"99999",class:"form-control",id:"previousReading",placeholder:"Previous Reading"},null,512),[[n.nr,i.item.previousReading]]),Et,i.validations.has("previousReading")?((0,n.wg)(),(0,n.iD)("div",$t,(0,n.zw)(i.validations.get("previousReading")),1)):(0,n.kq)("",!0)]),(0,n._)("div",Ht,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[13]||(t[13]=function(e){return i.item.multiplier=e}),type:"number",min:"0",max:"99999",class:"form-control",id:"multiplier",placeholder:"Multiplier"},null,512),[[n.nr,i.item.multiplier]]),Tt,i.validations.has("multiplier")?((0,n.wg)(),(0,n.iD)("div",Pt,(0,n.zw)(i.validations.get("multiplier")),1)):(0,n.kq)("",!0)]),(0,n._)("div",Yt,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[14]||(t[14]=function(e){return i.item.killoWattHourUsed=e}),type:"number",min:"0",max:"99999",class:"form-control",id:"killoWattHourUsed",placeholder:"kWH Used"},null,512),[[n.nr,i.item.killoWattHourUsed]]),Ot,i.validations.has("killoWattHourUsed")?((0,n.wg)(),(0,n.iD)("div",Wt,(0,n.zw)(i.validations.get("killoWattHourUsed")),1)):(0,n.kq)("",!0)]),(0,n._)("div",jt,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[15]||(t[15]=function(e){return i.item.reader=e}),type:"text",class:"form-control",id:"reader",placeholder:"Meter Read By"},null,512),[[n.nr,i.item.reader]]),Lt,i.validations.has("reader")?((0,n.wg)(),(0,n.iD)("div",Kt,(0,n.zw)(i.validations.get("reader")),1)):(0,n.kq)("",!0)])])])])])])])])}]]);var Gt={class:"row align-items-center"},Xt=(0,n._)("div",{class:"col-sm"},[(0,n._)("h1",{class:"h3 mb-sm-0"},[(0,n._)("i",{class:"fas fa-fw fa-money-bill me-1"}),(0,n.Uk)("Checkout ")])],-1),er={class:"col-sm-auto"},tr={class:"d-flex flex-row"},rr=[(0,n._)("i",{class:"fas fa-fw fa-sync"},null,-1)],nr=[(0,n._)("i",{class:"fas fa-fw fa-times"},null,-1)],ar={class:"card mt-2"},ir={class:"card-body"},sr={class:"row"},or={class:"col-sm-6"},lr={class:"form-floating mb-3"},ur={class:"form-control",id:"number"},cr=(0,n._)("label",{for:"number"},"number",-1),dr={class:"form-floating mb-3"},mr={class:"form-control",id:"amount"},fr=(0,n._)("label",{for:"amount"},"amount",-1),pr={class:"form-floating mb-3"},vr={class:"form-control",id:"statusText"},gr=(0,n._)("label",{for:"statusText"},"Status",-1),br={key:0,class:"card-footer"},hr=["href"],wr=(0,n.Uk)(" Pay with GCash via Paymongo ("),_r=(0,n.Uk)(") ");const yr={mixins:[de.Z],props:{uid:{type:String,required:!0},id:{type:String,required:!0}},data:function(){return{item:{},resource:null}},computed:{},created:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e,t.next=3,r.get();case 3:if(r.item.gCashSourceResourceId){t.next=8;break}return t.next=6,r.createResource();case 6:return t.next=8,r.get();case 8:return t.next=10,r.getResource();case 10:if("pending"===r.resource.attributes.status||"chargeable"===r.resource.attributes.status||"paid"===r.resource.attributes.status){t.next=18;break}return t.next=14,r.createResource();case 14:return t.next=16,r.get();case 16:return t.next=18,r.getResource();case 18:case"end":return t.stop()}}),t)})))()},methods:{get:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e).busy){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,r.busy=!0,t.next=7,r.$util.axios.get("/api/billing/".concat(r.id)).then((function(e){r.item=e.data}));case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),r.$util.handleError(t.t0);case 12:return t.prev=12,r.busy=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[3,9,12,15]])})))()},getResource:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e).busy){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,r.busy=!0,t.next=7,r.$util.axios.get("/api/gcash/resource/".concat(r.item.gCashSourceResourceId)).then((function(e){r.resource=e.data.data}));case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),r.$util.handleError(t.t0);case 12:return t.prev=12,r.busy=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[3,9,12,15]])})))()},createResource:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e).busy){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,r.busy=!0,t.next=7,r.$util.axios.post("/api/billing/".concat(r.id,"/create-resource")).then((function(e){r.item=e.data}));case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),r.$util.handleError(t.t0);case 12:return t.prev=12,r.busy=!1,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[3,9,12,15]])})))()}}},kr=(0,g.Z)(yr,[["render",function(e,t,r,a,i,s){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",Gt,[Xt,(0,n._)("div",er,[(0,n._)("div",tr,[(0,n._)("button",{onClick:t[0]||(t[0]=function(){return s.get&&s.get.apply(s,arguments)}),class:"ms-2 btn btn-primary"},rr),(0,n._)("button",{onClick:t[1]||(t[1]=function(){return e.close&&e.close.apply(e,arguments)}),class:"ms-1 btn btn-secondary"},nr)])])]),(0,n._)("div",ar,[(0,n._)("div",ir,[(0,n._)("div",sr,[(0,n._)("div",or,[(0,n._)("div",lr,[(0,n._)("div",ur,(0,n.zw)(i.item.number),1),cr]),(0,n._)("div",dr,[(0,n._)("div",mr,(0,n.zw)(i.item.amount),1),fr]),(0,n._)("div",pr,[(0,n._)("div",vr,(0,n.zw)(i.item.statusText),1),gr])])])]),i.resource?((0,n.wg)(),(0,n.iD)("div",br,[i.resource.attributes&&"pending"===i.resource.attributes.status?((0,n.wg)(),(0,n.iD)("a",{key:0,href:i.resource.attributes.redirect.checkout_Url},[wr,(0,n._)("small",null,(0,n.zw)(i.resource.attributes.status),1),_r],8,hr)):(0,n.kq)("",!0)])):(0,n.kq)("",!0)])])}]]);var xr={class:"row align-items-center"},Rr=(0,n._)("div",{class:"col-sm"},[(0,n._)("h1",{class:"h3 mb-sm-0"},[(0,n._)("i",{class:"fas fa-fw fa-money-bill me-1"}),(0,n.Uk)("Billings ")])],-1),Dr={class:"col-sm-auto"},Sr={class:"d-flex flex-row"},qr={class:"flex-grow-1 ms-1"},Ir={class:"input-group"},Vr=[(0,n._)("i",{class:"fa-solid fa-magnifying-glass"},null,-1)],Zr={class:"mt-2 table-responsive"},zr=(0,n._)("th",{class:"text-center"},"#",-1),Ur=(0,n._)("th",null,"Billing Number",-1),Mr=(0,n._)("th",null,"Status",-1),Ar=(0,n._)("th",null,"Due Date",-1),Cr=(0,n._)("th",null,"Amount",-1),Fr=["textContent"],Nr=["href"],Br={class:"row mb-3"},Er=(0,n._)("label",{for:"subject",class:"col-sm-2 col-form-label"},"Billing Number",-1),$r={class:"col-sm-10"},Hr={class:"form-control-plaintext"},Tr=["href"],Pr={class:"row mb-3"},Yr=(0,n._)("label",{for:"subject",class:"col-sm-2 col-form-label"},"Status",-1),Or={class:"col-sm-10"},Wr={class:"form-control-plaintext"},jr={class:"row mb-3"},Lr=(0,n._)("label",{for:"subject",class:"col-sm-2 col-form-label"},"Due Date",-1),Kr={class:"col-sm-10"},Jr={class:"form-control-plaintext"},Qr={class:"row mb-3"},Gr=(0,n._)("label",{for:"subject",class:"col-sm-2 col-form-label"},"Amount",-1),Xr={class:"col-sm-10"},en={class:"form-control-plaintext"};const tn={mixins:[Fe.Z],props:{uid:String,urlAdd:String,urlView:String},components:{},data:function(){return{baseUrl:"/api/billing/my-billings",lookups:{taskStatuses:[{id:0,name:"All"},{id:1,name:"Todo"},{id:2,name:"In Progress"},{id:3,name:"Done"}],taskTypes:[{id:0,name:"All"},{id:1,name:"Follow-Up Email"},{id:2,name:"Phone Call"},{id:3,name:"Demo"},{id:4,name:"Lunch Meeting"},{id:5,name:"Meetup"},{id:6,name:"Others"}]},filter:{items:[],cacheKey:"filter-".concat(this.uid,"/billings"),query:{}}}},computed:{},created:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(r=e).filter,new URLSearchParams(window.location.search),a=JSON.parse(localStorage.getItem(n.cacheKey))||{},r.initializeFilter(a),t.next=7,r.search();case 7:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},methods:{getQuery:function(){var e=this.filter;if(!this.busy)return["?c=",encodeURIComponent(e.query.criteria),"&p=",e.query.pageIndex,"&s=",e.query.pageSize,"&sf=",e.query.sortField,"&so=",e.query.sortOrder].join("")},saveQuery:function(){var e=this.filter;localStorage.setItem(e.cacheKey,JSON.stringify({criteria:e.query.criteria,pageIndex:e.query.pageIndex,pageSize:e.query.pageSize,sortField:e.query.sortField,sortOrder:e.query.sortOrder,visible:e.visible}))},getTaskTdCss:function(e){switch(e.taskStatus){case 1:return"table-warning";case 2:return"table-info";case 3:return"table-success";default:return""}}}},rn=(0,g.Z)(tn,[["render",function(e,t,r,a,i,s){var o=(0,n.up)("table-list"),l=(0,n.up)("m-pagination");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",xr,[Rr,(0,n._)("div",Dr,[(0,n._)("div",Sr,[(0,n._)("div",qr,[(0,n._)("div",Ir,[(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",placeholder:"Enter criteria...","aria-label":"Enter criteria...","aria-describedby":"button-addon2","onUpdate:modelValue":t[0]||(t[0]=function(e){return i.filter.query.criteria=e}),onKeyup:t[1]||(t[1]=(0,n.D2)((function(t){return e.search(1)}),["enter"]))},null,544),[[n.nr,i.filter.query.criteria]]),(0,n._)("button",{class:"btn btn-primary",type:"button",id:"button-addon2",onClick:t[2]||(t[2]=function(t){return e.search(1)})},Vr)])])])])]),(0,n._)("div",Zr,[(0,n.Wm)(o,{header:{key:"billingId",columns:[]},items:i.filter.items,getRowNumber:e.getRowNumber,setSelected:e.setSelected,isSelected:e.isSelected,"table-css":""},{header:(0,n.w5)((function(){return[zr,Ur,Mr,Ar,Cr]})),"table-row":(0,n.w5)((function(t){return[(0,n._)("td",{textContent:(0,n.zw)(e.getRowNumber(t.index)),class:"text-center"},null,8,Fr),(0,n._)("td",null,[(0,n._)("a",{href:"".concat(r.urlView,"/").concat(t.item.billingId)},(0,n.zw)(t.item.number),9,Nr)]),(0,n._)("td",null,(0,n.zw)(t.item.statusText),1),(0,n._)("td",null,(0,n.zw)(e.$moment(t.item.dateDue).format("YYYY-MM-DD hh:mm:ss")),1),(0,n._)("td",null,(0,n.zw)(t.item.amount),1)]})),"table-list":(0,n.w5)((function(t){return[(0,n._)("div",null,[(0,n._)("div",Br,[Er,(0,n._)("div",$r,[(0,n._)("div",Hr,[(0,n._)("a",{href:"".concat(r.urlView,"/").concat(t.item.billingId)},(0,n.zw)(t.item.number),9,Tr)])])]),(0,n._)("div",Pr,[Yr,(0,n._)("div",Or,[(0,n._)("div",Wr,(0,n.zw)(t.item.statusText),1)])]),(0,n._)("div",jr,[Lr,(0,n._)("div",Kr,[(0,n._)("div",Jr,(0,n.zw)(e.$moment(t.item.dateDue).format("YYYY-MM-DD hh:mm:ss")),1)])]),(0,n._)("div",Qr,[Gr,(0,n._)("div",Xr,[(0,n._)("div",en,(0,n.zw)(t.item.amount),1)])])])]})),_:1},8,["items","getRowNumber","setSelected","isSelected"])]),(0,n.Wm)(l,{filter:i.filter,search:e.search,showPerPage:!0,class:"mt-2"},null,8,["filter","search"])])}]]);var nn=r(17956);const an={props:{uid:{type:String,required:!0},id:{type:String,required:!0},roleId:{type:String,required:!0}},components:{billingsView:nn.Z},data:function(){return{}},computed:{},created:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},methods:{}},sn=(0,g.Z)(an,[["render",function(e,t,r,a,i,s){var o=(0,n.up)("billings-view");return(0,n.wg)(),(0,n.j4)(o,{uid:r.uid,id:r.id,roleId:r.roleId},null,8,["uid","id","roleId"])}]]);var on=r(81651);const ln={props:{uid:String,urlView:{type:String,required:!0}},components:{notificationsIndex:on.Z},data:function(){return{}},computed:{},created:function(){return(0,a.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},mounted:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},methods:{}},un=(0,g.Z)(ln,[["render",function(e,t,r,a,i,s){var o=(0,n.up)("notifications-index");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(o,{uid:r.uid,urlView:r.urlView},null,8,["uid","urlView"])])}]]);var cn=r(3345);const dn={props:{uid:{type:String,required:!0},id:{type:String,required:!0},roleId:{type:String,required:!0},urlViewAnnouncement:{type:String,required:!0},urlViewBilling:{type:String,required:!0},urlViewReservation:{type:String,required:!0}},components:{notificationsView:cn.Z},data:function(){return{}},computed:{},created:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},methods:{}},mn=(0,g.Z)(dn,[["render",function(e,t,r,a,i,s){var o=(0,n.up)("notifications-view");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(o,{uid:r.uid,id:r.id,roleId:r.roleId,urlViewAnnouncement:r.urlViewAnnouncement,urlViewBilling:r.urlViewBilling,urlViewReservation:r.urlViewReservation},null,8,["uid","id","roleId","urlViewAnnouncement","urlViewBilling","urlViewReservation"])])}]]);var fn={class:"row align-items-center"},pn=(0,n._)("div",{class:"col-sm"},[(0,n._)("h1",{class:"h3 mb-sm-0"},[(0,n._)("i",{class:"fas fa-fw fa-upload me-1"}),(0,n.Uk)("Scan Reader ")])],-1),vn={class:"col-sm-auto d-none"},gn={class:"d-flex flex-row"},bn=["disabled"],hn=[(0,n._)("span",{class:"fas fa-fw fa-save"},null,-1)],wn=[(0,n._)("i",{class:"fas fa-fw fa-times"},null,-1)],_n={class:"mt-2"},yn={class:"card"},kn=(0,n._)("div",{class:"card-header"}," Step 1. Select Image File ",-1),xn={class:"card-body"},Rn=(0,n._)("br",null,null,-1),Dn={key:0,class:"mt-2"},Sn=["src"],qn={class:"mt-2"},In=["onClick"],Vn=[(0,n._)("span",{class:"fas fa-fw fa-trash"},null,-1)],Zn={key:0,class:"mt-2"},zn={class:"card"},Un=(0,n._)("div",{class:"card-header"}," Step 2. Enter Previous Reading ",-1),Mn={class:"card-body"},An={key:1,class:"mt-2"},Cn={key:2,class:"table-responsive mt-3"},Fn={class:"table table-bordered"},Nn=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"Account Number"),(0,n._)("th",null,"Customer"),(0,n._)("th",null,"Meter Number"),(0,n._)("th",null,"Mobile Number")])],-1),Bn={class:"table table-bordered mt-2"},En=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",null,"Previous Reading"),(0,n._)("th",null,"Current Reading"),(0,n._)("th",null,"kW Used * kWH"),(0,n._)("th",null,"Amount")])],-1),$n=["onClick"],Hn=["rowspan"],Tn={key:0,class:"fas fa-fw fa-check me-2"},Pn=["rowspan"],Yn={key:0},On=["rowspan"],Wn={key:0};r(51301),r(76453),r(6429),r(95680),r(55090),r(92070);const jn={mixins:[de.Z],props:{uid:{type:String,required:!0},urlView:{type:String,required:!0}},data:function(){return{isDirty:!1,validations:new Map,imageFiles:null,imageFileUrls:null,selected:null,possibleValues:[],kiloWattPerHour:15,previousReading:0,accountNumber:"",customer:"",meterNumber:"",phoneNumber:""}},computed:{formIsValid:function(){var e=this,t=(e.item,new Map);return e.isDirty=!0,e.validations=t,0==t.size},imageFilesValid:function(){var e=this;return Array.isArray(e.imageFiles)?e.imageFiles.length>0:null!=e.imageFiles}},created:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},methods:{onImageFileChange:function(e){var t=this,r=[];r=Array.isArray(e.currentTarget.files)?e.currentTarget.files:[e.currentTarget.files[0]],t.imageFileUrls=[];for(var n=0;n<r.length;n++){var a=r[n];a&&t.imageFileUrls.push(URL.createObjectURL(a))}t.imageFiles=r},clearImageFile:function(e){var t=this;Array.isArray(t.imageFiles)?(t.imageFiles.splice(e,1),t.imageFileUrls.splice(e,1)):(t.imageFiles=null,t.imageFileUrls=null)},setSelected:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:(n=t).selected==e?e.selected=!e.selected:(null!==n.selected&&(n.selected.selected=!1),n.selected=e,e.selected=!0);case 2:case"end":return r.stop()}}),r)})))()},getPossibleValues:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e).busy){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,r.busy=!0,n=new FormData,Array.isArray(r.imageFiles)?r.imageFiles.forEach((function(e){n.append("files",e)})):n.append("files",r.imageFiles),t.next=9,r.$util.axios.post("/api/reader/upload-image/",n).then((function(e){var t=e.data;r.accountNumber=t.accountNumber,r.meterNumber=t.meterNumber,r.phoneNumber=t.phoneNumber,r.customer=t.customer;var n=t.items.map((function(e,t){return{item:e,selected:!1}}));r.possibleValues=n}));case 9:t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),a=r.$util.getErrorMessageAsHtml(t.t0),alert(a);case 15:return t.prev=15,r.busy=!1,t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[3,11,15,18]])})))()},save:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e).busy){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,r.busy=!0,n=new FormData,Array.isArray(r.imageFiles)?r.imageFiles.forEach((function(e){n.append("files",e)})):n.append("files",r.imageFiles),t.next=9,r.$util.axios.post("/api/reader/upload-image/",n).then((function(e){}));case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),r.$util.handleError(t.t0);case 14:return t.prev=14,r.busy=!1,t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[3,11,14,17]])})))()},uploadReading:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e).busy){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,r.$util.axios.post("/api/reader/add-reading/".concat(r.selected.item)).then((function(e){alert("Meter Reading successfully uploaded.")}));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(3),r.$util.handleError(t.t0);case 11:return t.prev=11,r.busy=!1,t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[3,8,11,14]])})))()}}},Ln=(0,g.Z)(jn,[["render",function(e,t,r,a,i,s){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",fn,[pn,(0,n._)("div",vn,[(0,n._)("div",gn,[(0,n._)("button",{disabled:i.isDirty&&!s.formIsValid,onClick:t[0]||(t[0]=function(){return s.save&&s.save.apply(s,arguments)}),class:"btn btn-primary ms-2"},hn,8,bn),(0,n._)("button",{onClick:t[1]||(t[1]=function(){return e.close&&e.close.apply(e,arguments)}),class:"ms-1 btn btn-secondary"},wn)])])]),(0,n._)("div",_n,[(0,n._)("div",yn,[kn,(0,n._)("div",xn,[(0,n._)("input",{type:"file",id:"fileInput",onChange:t[2]||(t[2]=function(){return s.onImageFileChange&&s.onImageFileChange.apply(s,arguments)}),accept:"image",placeholder:"Upload Billings"},null,32),Rn,i.imageFileUrls?((0,n.wg)(),(0,n.iD)("div",Dn,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.imageFileUrls,(function(e,t){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",null,[(0,n._)("img",{src:e,class:"img-fluid img-thumbnail",style:{width:"300px"}},null,8,Sn),(0,n._)("div",qn,[(0,n._)("button",{onClick:function(e){return s.clearImageFile(t)},class:"btn btn-sm btn-outline-danger align-middle"},Vn,8,In)])])])})),256))])):(0,n.kq)("",!0)])])]),null!==i.imageFiles?((0,n.wg)(),(0,n.iD)("div",Zn,[(0,n._)("div",zn,[Un,(0,n._)("div",Mn,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.previousReading=e}),type:"number",class:"form-control"},null,512),[[n.nr,i.previousReading]])])])])):(0,n.kq)("",!0),i.previousReading>0?((0,n.wg)(),(0,n.iD)("div",An,[(0,n._)("button",{onClick:t[4]||(t[4]=function(){return s.getPossibleValues&&s.getPossibleValues.apply(s,arguments)}),class:"btn btn-primary"},"Read Meter")])):(0,n.kq)("",!0),i.previousReading>0?((0,n.wg)(),(0,n.iD)("div",Cn,[(0,n._)("table",Fn,[Nn,(0,n._)("tbody",null,[(0,n._)("tr",null,[(0,n._)("td",null,(0,n.zw)(i.accountNumber),1),(0,n._)("td",null,(0,n.zw)(i.customer),1),(0,n._)("td",null,(0,n.zw)(i.meterNumber),1),(0,n._)("td",null,(0,n.zw)(i.phoneNumber),1)])])]),(0,n._)("table",Bn,[En,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.possibleValues,(function(e,r){return(0,n.wg)(),(0,n.iD)("tr",{onClick:function(t){return s.setSelected(e)}},[0===r?((0,n.wg)(),(0,n.iD)("th",{key:0,rowspan:i.possibleValues.length},(0,n.zw)(i.previousReading),9,Hn)):(0,n.kq)("",!0),(0,n._)("td",{class:(0,n.C_)(i.selected==e?"text-primary":"")},[i.selected===e?((0,n.wg)(),(0,n.iD)("span",Tn)):(0,n.kq)("",!0),(0,n.Uk)((0,n.zw)(e.item),1)],2),0===r?((0,n.wg)(),(0,n.iD)("th",{key:1,rowspan:i.possibleValues.length},[i.selected?((0,n.wg)(),(0,n.iD)("span",Yn,(0,n.zw)(i.selected.item-i.previousReading)+" * "+(0,n.zw)(i.kiloWattPerHour),1)):(0,n.kq)("",!0)],8,Pn)):(0,n.kq)("",!0),0===r?((0,n.wg)(),(0,n.iD)("th",{key:2,rowspan:i.possibleValues.length},[i.selected?((0,n.wg)(),(0,n.iD)("span",Wn,[(0,n.Uk)((0,n.zw)((i.selected.item-i.previousReading)*i.kiloWattPerHour)+" php ",1),(0,n._)("div",null,[(0,n._)("button",{onClick:t[5]||(t[5]=function(){return s.uploadReading&&s.uploadReading.apply(s,arguments)}),class:"btn btn-primary"},"Upload")])])):(0,n.kq)("",!0)],8,On)):(0,n.kq)("",!0)],8,$n)})),256))])])])):(0,n.kq)("",!0)])}]]);var Kn=r(69392);const Jn={props:{uid:{type:String,required:!0},roleId:{type:String,required:!0},urlView:{type:String,required:!0},urlAdd:{type:String,required:!0}},components:{reservationsIndex:Kn.Z},data:function(){return{}},computed:{},created:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},methods:{}},Qn=(0,g.Z)(Jn,[["render",function(e,t,r,a,i,s){var o=(0,n.up)("reservations-index");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(o,{uid:r.uid,urlView:r.urlView,urlAdd:r.urlAdd,roleId:r.roleId},null,8,["uid","urlView","urlAdd","roleId"])])}]]);var Gn={class:"row align-items-center"},Xn=(0,n._)("div",{class:"col-sm"},[(0,n._)("h1",{class:"h3 mb-sm-0"},[(0,n._)("i",{class:"fa-solid fa-fw fa-calendar-check me-1"}),(0,n.Uk)("Add Reservations ")])],-1),ea={class:"col-sm-auto"},ta={class:"d-flex flex-row"},ra=["disabled"],na=[(0,n._)("span",{class:"fas fa-fw fa-save"},null,-1)],aa=[(0,n._)("i",{class:"fas fa-fw fa-times"},null,-1)],ia={class:"mt-2"},sa={class:"card shadow-sm"},oa=(0,n._)("div",{class:"card-header bg-info text-white"},null,-1),la={class:"card-body"},ua={class:"needs-validation",novalidate:""},ca={class:"row"},da={class:"col-sm-6"},ma={class:"form-floating mb-3"},fa=(0,n._)("label",{for:"dateReservation"},"Date",-1),pa={key:0,class:"d-block invalid-feedback"},va={class:"form-floating mb-3"},ga=(0,n._)("option",{value:""},"- Select -",-1),ba=["value"],ha=(0,n._)("label",{for:"branchId"},"Branch",-1),wa={key:0,class:"d-block invalid-feedback"},_a={class:"form-floating mb-3"},ya=(0,n._)("option",{value:""},"- Select -",-1),ka=["value"],xa=(0,n._)("label",{for:"timeSlot"},"Time SLot",-1),Ra={key:0,class:"d-block invalid-feedback"},Da={key:0,class:"col-sm-6"},Sa={class:"alert alert-danger"},qa=["innerHTML"];const Ia={mixins:[de.Z],props:{uid:{type:String,required:!0},urlView:{type:String,required:!0}},data:function(){return{isDirty:!1,validations:new Map,lookups:{branches:[],timeSlots:[]},errorHtml:null,timeSlot:"",item:{branchId:null,dateReservation:this.$moment().format("YYYY-MM-DD")}}},computed:{formIsValid:function(){var e=this,t=e.item,r=new Map;return t.branchId||r.set("branchId","Branch is required."),t.dateReservation||r.set("dateReservation","Date is required."),e.timeSlot||r.set("timeSlot","Time SLot is required."),e.isDirty=!0,e.validations=r,0==r.size}},created:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=e).formIsValid,t.next=4,r.getLookups();case 4:case"end":return t.stop()}}),t)})))()},methods:{getValidClass:function(e){return this.isDirty?this.validations.has(e)?"is-invalid":"is-valid":""},getLookups:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e,t.next=3,r.getBranches();case 3:r.lookups.timeSlots=r.getTimeStops("9:00","16:00");case 4:case"end":return t.stop()}}),t)})))()},getBranches:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e,t.prev=1,t.next=4,r.$util.axios.get("/api/branch/lookup").then((function(e){r.lookups.branches=e.data}));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),r.$util.handleError(t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})))()},getTimeStops:function(e,t){var r=this,n=r.$moment(e,"HH:mm"),a=r.$moment(t,"HH:mm");a.isBefore(n)&&a.add(1,"day");for(var i=[];n<=a;)i.push(new r.$moment(n).format("hh:mm a")),n.add(15,"minutes");return i},save:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r,n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e).busy){t.next=3;break}return t.abrupt("return");case 3:if(r.formIsValid){t.next=5;break}return t.abrupt("return");case 5:return t.prev=5,r.busy=!0,n=r.$util.clone(r.item),i=r.$moment.utc("".concat(n.dateReservation," ").concat(r.timeSlot)),n.dateReservation=i,t.next=12,r.$util.axios.post("/api/reservation",n).then((function(e){r.$toast.success("Add Reservation","Reservation was created.",{onClose:function(){return(0,a.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.close();case 2:case"end":return e.stop()}}),e)})))()}})}));case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(5),r.errorHtml=r.$util.getErrorMessageAsHtml(t.t0);case 17:return t.prev=17,r.busy=!1,t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[5,14,17,20]])})))()}}},Va=(0,g.Z)(Ia,[["render",function(e,t,r,a,i,s){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n._)("div",Gn,[Xn,(0,n._)("div",ea,[(0,n._)("div",ta,[(0,n._)("button",{disabled:i.isDirty&&!s.formIsValid,onClick:t[0]||(t[0]=function(){return s.save&&s.save.apply(s,arguments)}),class:"btn btn-primary"},na,8,ra),(0,n._)("button",{onClick:t[1]||(t[1]=function(){return e.close&&e.close.apply(e,arguments)}),class:"ms-1 btn btn-secondary"},aa)])])]),(0,n._)("div",ia,[(0,n._)("div",sa,[oa,(0,n._)("div",la,[(0,n._)("form",ua,[(0,n._)("div",ca,[(0,n._)("div",da,[(0,n._)("div",ma,[(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.item.dateReservation=e}),type:"date",class:"form-control",id:"dateReservation",placeholder:"Date"},null,512),[[n.nr,i.item.dateReservation]]),fa,i.validations.has("dateReservation")?((0,n.wg)(),(0,n.iD)("div",pa,(0,n.zw)(i.validations.get("dateReservation")),1)):(0,n.kq)("",!0)]),(0,n._)("div",va,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.item.branchId=e}),class:"form-control",id:"branchId",placeholder:"Branch"},[ga,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.lookups.branches,(function(e){return(0,n.wg)(),(0,n.iD)("option",{value:e.branchId},(0,n.zw)(e.name),9,ba)})),256))],512),[[n.bM,i.item.branchId]]),ha,i.validations.has("branchId")?((0,n.wg)(),(0,n.iD)("div",wa,(0,n.zw)(i.validations.get("branchId")),1)):(0,n.kq)("",!0)]),(0,n._)("div",_a,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[4]||(t[4]=function(e){return i.timeSlot=e}),class:"form-control",id:"timeSlot",placeholder:"Time Slot"},[ya,((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.lookups.timeSlots,(function(e){return(0,n.wg)(),(0,n.iD)("option",{value:e},(0,n.zw)(e),9,ka)})),256))],512),[[n.bM,i.timeSlot]]),xa,i.validations.has("timeSlot")?((0,n.wg)(),(0,n.iD)("div",Ra,(0,n.zw)(i.validations.get("timeSlot")),1)):(0,n.kq)("",!0)])]),i.errorHtml?((0,n.wg)(),(0,n.iD)("div",Da,[(0,n._)("div",Sa,[(0,n._)("div",{innerHTML:i.errorHtml},null,8,qa)])])):(0,n.kq)("",!0)])])])])])])}]]);var Za=r(58671);const za={props:{uid:{type:String,required:!0},id:{type:String,required:!0},roleId:{type:String,required:!0}},components:{reservationsView:Za.Z},data:function(){return{}},computed:{},created:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e;case 1:case"end":return t.stop()}}),t)})))()},methods:{}},Ua={template:"#app",components:{AppBar:b,Index:fe,AnnouncementsIndex:Be,AnnouncementsView:He,BillingsAdd:Qt,BillingsCheckout:kr,BillingsIndex:rn,BillingsView:sn,NotificationsIndex:un,NotificationsView:mn,ReaderIndex:Ln,ReservationsIndex:Qn,ReservationsAdd:Va,ReservationsView:(0,g.Z)(za,[["render",function(e,t,r,a,i,s){var o=(0,n.up)("reservations-view");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(o,{uid:r.uid,id:r.id,roleId:r.roleId},null,8,["uid","id","roleId"])])}]])},props:{uid:String,appName:String,urlProfilePicture:String},data:function(){return{menus:[{to:"/",label:"Home",icon:"fas fa-fw fa-home"},{to:"/contacts",label:"Contacts",icon:"fas fa-fw fa-id-card"},{to:"/tasks",label:"Tasks",icon:"fas fa-fw fa-tasks"},{to:"/documents",label:"Documents",icon:"fas fa-fw fa-archive"}]}},mounted:function(){return(0,a.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},created:function(){return(0,a.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{}};var Ma=r(20561),Aa=r(81312),Ca=r(99970),Fa=r(61286),Na=r(5493),Ba=r(52367),Ea=(0,n.ri)(Ua);Ea.use(Ma.Z),Ea.use(Aa.Z),Ea.component("Notification",Ca.Z),Ea.component("m-pagination",Fa.Z),Ea.component("sort-field",Na.Z),Ea.component("table-list",Ba.Z),Ea.mount("#root")}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var i=r[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=t,e=[],n.O=(t,r,a,i)=>{if(!r){var s=1/0;for(c=0;c<e.length;c++){for(var[r,a,i]=e[c],o=!0,l=0;l<r.length;l++)(!1&i||s>=i)&&Object.keys(n.O).every((e=>n.O[e](r[l])))?r.splice(l--,1):(o=!1,i<s&&(s=i));if(o){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[r,a,i]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={578:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var a,i,[s,o,l]=r,u=0;if(s.some((t=>0!==e[t]))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(l)var c=l(n)}for(t&&t(r);u<s.length;u++)i=s[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(c)},r=self.webpackChunkclient=self.webpackChunkclient||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=n.O(void 0,[881,846,953,257,933],(()=>n(16042)));a=n.O(a)})();